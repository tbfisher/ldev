# Development environment with profiler.

version: "3"

services:

  php:
    environment:
      XDEBUG_CONFIG: "profiler_output_dir=/tmp/webgrind"
    volumes:
      - "webgrind:/tmp/webgrind:delegated"

  webgrind:
    image: tbfisher/webgrind
    environment:
      XDEBUG_OUTPUT_DIR: /tmp
      WEBGRIND_STORAGE_DIR: /tmp
      PHP_MAX_EXECUTION_TIME: 1200
    volumes:
      - "webgrind:/tmp:delegated"
    labels:
      - 'traefik.backend=webgrind'
      - 'traefik.port=8080'
      - 'traefik.frontend.rule=Host:webgrind.${LDEV_BASE_DOMAIN}'
      - 'traefik.frontend.entryPoints=http'

volumes:
  webgrind:
    driver: local
